<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.27.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1722504757742-1" author="user (generated)">
        <createTable remarks="Исследования на углеводы" tableName="carbohydrates_researches">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_carbohydrates_researches"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="byuksa_parallel_first" remarks="Масса бюксы первая параллель, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="byuksa_parallel_second" remarks="Масса бюксы вторая параллель, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="banka_empty_mass" remarks="Масса пустой банки, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="banka_with_probe_mass" remarks="Масса банки с пробой, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="mass" remarks="Масса навески, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-2" author="user (generated)">
        <createTable remarks="Исследования на сухие остатки" tableName="dry_substances_researches">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_dry_substances_researches"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="byuksa_parallel_first" remarks="Масса бюксы первая параллель, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="byuksa_parallel_second" remarks="Масса бюксы вторая параллель, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="banka_empty_mass" remarks="Масса пустой банки, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="mass" remarks="Масса навески, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-3" author="user (generated)">
        <createTable remarks="Исследования на жиры" tableName="fats_research">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_fats_research"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="patron_mass_before_extraction" remarks="Масса патрона до экстракции, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="patron_mass_after_extraction" remarks="Масса патрона после экстракции, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-4" author="user (generated)">
        <createTable remarks="Ингредиенты" tableName="ingredients">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_ingredients"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="gross" remarks="Масса брутто, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="net" remarks="Масса нетто, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="probe_id" type="UUID"/>
            <column name="ingredient_in_catalog_id" remarks="Ингредиент в справочнике" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-5" author="user (generated)">
        <createTable remarks="Каталог ингредиентов" tableName="ingredients_catalog">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_ingredients_catalog"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" remarks="Наименование ингредиента" type="VARCHAR(127)">
                <constraints nullable="false"/>
            </column>
            <column name="edible_part" remarks="Масса съедобной части, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="water" remarks="Масса воды, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="proteins" remarks="Масса белков, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="fats" remarks="Масса жиров, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="carbohydrates" remarks="Масса углеводов, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-6" author="user (generated)">
        <createTable remarks="Пробы блюд" tableName="probes">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_probes"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="name" remarks="Наименование пробы" type="VARCHAR(127)">
                <constraints nullable="false"/>
            </column>
            <column name="type" remarks="Тип пробы" type="VARCHAR(127)">
                <constraints nullable="false"/>
            </column>
            <column name="code" remarks="Код пробы" type="VARCHAR(127)">
                <constraints nullable="false"/>
            </column>
            <column name="mass_theory" remarks="Масса теоретическая, г" type="FLOAT"/>
            <column name="mass_fact" remarks="Масса фактическая, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="proteins_research_id" type="UUID"/>
            <column name="fats_research_id" type="UUID"/>
            <column name="dry_substances_research_id" type="UUID"/>
            <column name="carbohydrates_research_id" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-7" author="user (generated)">
        <createTable remarks="Исследования на белок" tableName="proteins_researches">
            <column name="id" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_proteins_researches"/>
            </column>
            <column name="created_at" remarks="Дата и время создания" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="updated_at" remarks="Дата и время редактирования" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="titrant_volume" remarks="Объём титранта, г/см^3" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="mass" remarks="Масса навески, г" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="control_volume" remarks="Объём контроля, г/см^3" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="coefficient" remarks="Коэффициент" type="FLOAT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1722504757742-8" author="user (generated)">
        <addForeignKeyConstraint baseColumnNames="ingredient_in_catalog_id" baseTableName="ingredients"
                                 constraintName="FK_INGREDIENTS_ON_INGREDIENT_IN_CATALOG" onDelete="RESTRICT"
                                 referencedColumnNames="id" referencedTableName="ingredients_catalog"/>
    </changeSet>
    <changeSet id="1722504757742-9" author="user (generated)">
        <addForeignKeyConstraint baseColumnNames="probe_id" baseTableName="ingredients"
                                 constraintName="FK_INGREDIENTS_ON_PROBE" onDelete="CASCADE" referencedColumnNames="id"
                                 referencedTableName="probes"/>
    </changeSet>
    <changeSet id="1722504757742-10" author="user (generated)">
        <addForeignKeyConstraint baseColumnNames="carbohydrates_research_id" baseTableName="probes"
                                 constraintName="FK_PROBES_ON_CARBOHYDRATES_RESEARCH" referencedColumnNames="id"
                                 referencedTableName="carbohydrates_researches"/>
    </changeSet>
    <changeSet id="1722504757742-11" author="user (generated)">
        <addForeignKeyConstraint baseColumnNames="dry_substances_research_id" baseTableName="probes"
                                 constraintName="FK_PROBES_ON_DRY_SUBSTANCES_RESEARCH" referencedColumnNames="id"
                                 referencedTableName="dry_substances_researches"/>
    </changeSet>
    <changeSet id="1722504757742-12" author="user (generated)">
        <addForeignKeyConstraint baseColumnNames="fats_research_id" baseTableName="probes"
                                 constraintName="FK_PROBES_ON_FATS_RESEARCH" referencedColumnNames="id"
                                 referencedTableName="fats_research"/>
    </changeSet>
    <changeSet id="1722504757742-13" author="user (generated)">
        <addForeignKeyConstraint baseColumnNames="proteins_research_id" baseTableName="probes"
                                 constraintName="FK_PROBES_ON_PROTEINS_RESEARCH" referencedColumnNames="id"
                                 referencedTableName="proteins_researches"/>
    </changeSet>

</databaseChangeLog>